  <html>
    <head>
      <meta charset="utf-8">
      <title>OpenShift 4.2 on OpenStack 13 Installation Lab</title>
      <style>
        #wrapper {width: 960px; margin: 0 auto;}
        /* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}

      </style>
      <link href='https://fonts.googleapis.com/css?family=Noto+Serif' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/asciidoc.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/yaml.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/dockerfile.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/makefile.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/go.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/rust.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/haskell.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/typescript.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/scss.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/less.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/handlebars.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/groovy.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/scala.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/bash.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/ini.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body>
      <div id="wrapper">
        <div class="article">
          <h1 id="__asciidoctor-preview-0__">OpenShift 4.2 on OpenStack 13 Installation Lab</h1>
<div id="preamble">
<div class="sectionbody">
<div id="__asciidoctor-preview-1__" class="paragraph">
<p>In this lab, you will install OpenShift 4.2 on Red Hat OpenStack 13</p>
</div>
<div id="__asciidoctor-preview-2__" class="paragraph">
<p>Order your lab environment through <a href="https://labs.opentlc.com" class="bare">https://labs.opentlc.com</a> by selecting <strong>Services</strong> &#8594; <strong>Catalogs</strong> &#8594; <strong>All Services</strong> &#8594; <strong>OPENTLC Cloud Infrastructure Labs</strong> &#8594; <strong>rhte2019-ocp-osp</strong>.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_architecture">Architecture</a>
<ul class="sectlevel2">
<li><a href="#_servers">Servers</a></li>
<li><a href="#_networks">Networks</a></li>
</ul>
</li>
<li><a href="#_overcloud_preparation">Overcloud preparation</a>
<ul class="sectlevel2">
<li><a href="#_configure_network_and_subnet">Configure network and subnet</a></li>
<li><a href="#_create_flavor_code_m1_large_code_and_image_code_rhcos_code">Create flavor <code>m1.large</code> and image <code>rhcos</code></a></li>
<li><a href="#_create_project_for_openshift_user_and_assign_permissions">Create project for openshift, user and assign permissions</a></li>
</ul>
</li>
<li><a href="#_openshift_4_2_installer_preparation">OpenShift 4.2 installer preparation</a>
<ul class="sectlevel2">
<li><a href="#_download_and_configure_go">Download and configure Go</a></li>
</ul>
</li>
<li><a href="#_openshift_4_2_installation">OpenShift 4.2 installation</a>
<ul class="sectlevel2">
<li><a href="#_review_installation_process">Review installation process</a></li>
</ul>
</li>
<li><a href="#_test_basic_functionality">Test basic functionality</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div id="__asciidoctor-preview-3__" class="paragraph">
<p><strong>OpenShift Container Platform</strong> is a platform for developing and running containerized applications. It is designed to allow applications and the data centers that support them to expand from just a few machines and applications to thousands of machines that serve millions of clients.</p>
</div>
<div id="__asciidoctor-preview-4__" class="paragraph">
<p>In <strong>OpenShift Container Platform 4.1</strong>, you must use <strong>RHCOS</strong> for all control plane machines, but you can use <strong>Red Hat Enterprise Linux</strong> (<strong>RHEL</strong>) as the operating system for compute, or worker, machines. If you choose to use <strong>RHEL</strong> workers, you must perform more system maintenance than if you use RHCOS for all of the cluster machines.</p>
</div>
<div id="__asciidoctor-preview-5__" class="paragraph">
<p>With <strong>OpenShift Container Platform 4.1</strong>, if you have an account with the right permissions, you can deploy a production cluster in supported clouds by running a single command and providing a few values. You can also customize your cloud installation or install your cluster in your data center if you use a supported platform.</p>
</div>
<div id="__asciidoctor-preview-6__" class="paragraph">
<p>For clusters that use <strong>RHCOS</strong> for all machines, updating, or upgrading, <strong>OpenShift Container Platform</strong> is a simple, highly-automated process. Because <strong>OpenShift Container Platform</strong> completely controls the systems and services that run on each machine, including the operating system itself, from a central control plane, upgrades are designed to become automatic events.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_servers">Servers</h3>
<table id="__asciidoctor-preview-7__" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Server Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">workstation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jump host for the Lab</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">undercloud</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red Hat Openstack Director</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ctrl01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controller</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compute01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute node (12 CPUs + 32 GB RAM)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compute02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute node (12 CPUs + 32 GB RAM)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_networks">Networks</h3>
<table id="__asciidoctor-preview-8__" class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Network</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.122.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LAB Admin Network</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">172.16.0.0/24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSP Control Plane + Floating IP (flat network)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.128.0.0/14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OCP Cluster Network</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.10.0.0/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OCP Machine network</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">172.30.0.0/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OCP Service Network</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overcloud_preparation">Overcloud preparation</h2>
<div class="sectionbody">
<div id="__asciidoctor-preview-9__" class="paragraph">
<p>In this section overcloud will be configured:</p>
</div>
<div id="__asciidoctor-preview-10__" class="ulist">
<ul>
<li>
<p>Create a <code>public</code> network and subnet for floating ips.</p>
</li>
<li>
<p>Create required flavor</p>
</li>
<li>
<p>Create a image named <code>rhcos</code></p>
</li>
<li>
<p>Create a project named <code>openshift</code></p>
</li>
<li>
<p>Create an user named <code>openshift_admin</code> and assign role.</p>
</li>
<li>
<p>Configure Swift permissions</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_configure_network_and_subnet">Configure network and subnet</h3>
<div id="__asciidoctor-preview-11__" class="olist arabic">
<ol class="arabic">
<li>
<p>Connect to <code>undercloud</code> (password is <code>r3dh4t1!</code> for user <code>stack</code>)</p>
<div id="__asciidoctor-preview-12__" class="listingblock">
<div class="title">[Workstation]</div>
<div class="content">
<pre class="nowrap">[student@workstation ~]$ ssh stack@undercloud</pre>
</div>
</div>
</li>
<li>
<p>Create network <code>public</code> as external network</p>
<div id="__asciidoctor-preview-13__" class="listingblock">
<div class="content">
<pre class="nowrap">[stack@undercloud ~]$ . overcloudrc
(overcloud) [stack@undercloud ~]$ openstack network create --provider-network-type flat --provider-physical-network datacentre public --external --share</pre>
</div>
</div>
<div id="__asciidoctor-preview-14__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | UP                                   |
| availability_zone_hints   |                                      |
| availability_zones        |                                      |
| created_at                | 2019-06-28T08:13:26Z                 |
| description               |                                      |
| dns_domain                | None                                 |
| id                        | 725b7803-45f2-4acd-992d-fa8a1fee28ec |
| ipv4_address_scope        | None                                 |
| ipv6_address_scope        | None                                 |
| is_default                | False                                |
| is_vlan_transparent       | None                                 |
| mtu                       | 1500                                 |
| name                      | public                               |
| port_security_enabled     | True                                 |
| project_id                | 6d6f875dd05240ba8ee773f2187f9c11     |
| provider:network_type     | flat                                 |
| provider:physical_network | datacentre                           |
| provider:segmentation_id  | None                                 |
| qos_policy_id             | None                                 |
| revision_number           | 6                                    |
| router:external           | External                             |
| segments                  | None                                 |
| shared                    | True                                 |
| status                    | ACTIVE                               |
| subnets                   |                                      |
| tags                      |                                      |
| updated_at                | 2019-06-28T08:13:26Z                 |
+---------------------------+--------------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Create subnet <code>public_subnet</code> to be used for floating IP</p>
<div id="__asciidoctor-preview-15__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack subnet create --no-dhcp --gateway 172.16.0.1 --subnet-range 172.16.0.0/24 --allocation-pool start=172.16.0.50,end=172.16.0.90 --network public public_subnet</pre>
</div>
</div>
<div id="__asciidoctor-preview-16__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| allocation_pools  | 172.16.0.50-172.16.0.90              |
| cidr              | 172.16.0.0/24                        |
| created_at        | 2019-06-28T08:14:53Z                 |
| description       |                                      |
| dns_nameservers   |                                      |
| enable_dhcp       | False                                |
| gateway_ip        | 172.16.0.1                           |
| host_routes       |                                      |
| id                | e39a115e-c4c4-45cd-8653-4446cb5e8069 |
| ip_version        | 4                                    |
| ipv6_address_mode | None                                 |
| ipv6_ra_mode      | None                                 |
| name              | public_subnet                        |
| network_id        | 725b7803-45f2-4acd-992d-fa8a1fee28ec |
| project_id        | 6d6f875dd05240ba8ee773f2187f9c11     |
| revision_number   | 0                                    |
| segment_id        | None                                 |
| service_types     |                                      |
| subnetpool_id     | None                                 |
| tags              |                                      |
| updated_at        | 2019-06-28T08:14:53Z                 |
+-------------------+--------------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Create a floating IP</p>
<div id="__asciidoctor-preview-17__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack floating ip create --floating-ip-address 172.16.0.70 public</pre>
</div>
</div>
<div id="__asciidoctor-preview-18__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| created_at          | 2019-06-28T08:50:30Z                 |
| description         |                                      |
| fixed_ip_address    | None                                 |
| floating_ip_address | 172.16.0.70                          |
| floating_network_id | 725b7803-45f2-4acd-992d-fa8a1fee28ec |
| id                  | 933731d2-554d-43cd-a174-9e4da8c06e7b |
| name                | 172.16.0.70                          |
| port_id             | None                                 |
| project_id          | d4ca6cd93855497c90abb074aef473b5     |
| qos_policy_id       | None                                 |
| revision_number     | 0                                    |
| router_id           | None                                 |
| status              | DOWN                                 |
| subnet_id           | None                                 |
| updated_at          | 2019-06-28T08:50:30Z                 |
+---------------------+--------------------------------------+</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_flavor_code_m1_large_code_and_image_code_rhcos_code">Create flavor <code>m1.large</code> and image <code>rhcos</code></h3>
<div id="__asciidoctor-preview-19__" class="olist arabic">
<ol class="arabic">
<li>
<p>Create flavor <code>m1.xlarge</code> with 6vcpu and 12GB of RAM</p>
<div id="__asciidoctor-preview-20__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack flavor create --ram 12288 --disk 20 --vcpu 6 --public m1.xlarge</pre>
</div>
</div>
<div id="__asciidoctor-preview-21__" class="listingblock">
<div class="content">
<pre class="nowrap">+----------------------------+--------------------------------------+
| Field                      | Value                                |
+----------------------------+--------------------------------------+
| OS-FLV-DISABLED:disabled   | False                                |
| OS-FLV-EXT-DATA:ephemeral  | 0                                    |
| disk                       | 20                                   |
| id                         | 6817178e-102e-4440-8897-b381df52311d |
| name                       | m1.xlarge                            |
| os-flavor-access:is_public | True                                 |
| properties                 |                                      |
| ram                        | 12288                                |
| rxtx_factor                | 1.0                                  |
| swap                       |                                      |
| vcpus                      | 6                                    |
+----------------------------+--------------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Get URL of latest RHCOS image</p>
<div id="__asciidoctor-preview-22__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ curl --silent https://raw.githubusercontent.com/openshift/installer/master/data/data/rhcos.json | jq --raw-output '.baseURI + .images.openstack.path'</pre>
</div>
</div>
<div id="__asciidoctor-preview-23__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">https://releases-art-rhcos.svc.ci.openshift.org/art/storage/releases/rhcos-4.2/420.8.20190624.0/rhcos-420.8.20190624.0-openstack.qcow2</pre>
</div>
</div>
</li>
<li>
<p>Download image</p>
<div id="__asciidoctor-preview-24__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ curl --compressed --insecure -L  -O $(curl --silent https://raw.githubusercontent.com/openshift/installer/master/data/data/rhcos.json | jq --raw-output '.baseURI + .images.openstack.path')</pre>
</div>
</div>
<div id="__asciidoctor-preview-25__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   161  100   161    0     0    344      0 --:--:-- --:--:-- --:--:--   344
100  684M  100  684M    0     0  26.2M      0  0:00:26  0:00:26 --:--:-- 24.7M</pre>
</div>
</div>
</li>
<li>
<p>Create image on Glance</p>
<div id="__asciidoctor-preview-26__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack image create rhcos --container-format bare --disk-format qcow2 --public --file rhcos-*.qcow2</pre>
</div>
</div>
<div id="__asciidoctor-preview-27__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+------------------+------------------------------------------------------------------------------+
| Field            | Value                                                                        |
+------------------+------------------------------------------------------------------------------+
| checksum         | 0a335ea831d6f22dc25236fad2cbb898                                             |
| container_format | bare                                                                         |
| created_at       | 2019-06-28T08:21:33Z                                                         |
| disk_format      | qcow2                                                                        |
| file             | /v2/images/1814a153-ebf5-4ecc-9bc0-871cb965a9a7/file                         |
| id               | 1814a153-ebf5-4ecc-9bc0-871cb965a9a7                                         |
| min_disk         | 0                                                                            |
| min_ram          | 0                                                                            |
| name             | rhcos                                                                        |
| owner            | 6d6f875dd05240ba8ee773f2187f9c11                                             |
| properties       | direct_url='swift+config://ref1/glance/1814a153-ebf5-4ecc-9bc0-871cb965a9a7' |
| protected        | False                                                                        |
| schema           | /v2/schemas/image                                                            |
| size             | 717317607                                                                    |
| status           | active                                                                       |
| tags             |                                                                              |
| updated_at       | 2019-06-28T08:21:48Z                                                         |
| virtual_size     | None                                                                         |
| visibility       | public                                                                       |
+------------------+------------------------------------------------------------------------------+</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_project_for_openshift_user_and_assign_permissions">Create project for openshift, user and assign permissions</h3>
<div id="__asciidoctor-preview-28__" class="olist arabic">
<ol class="arabic">
<li>
<p>Create project named <code>openshift</code></p>
<div id="__asciidoctor-preview-29__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack project create openshift</pre>
</div>
</div>
<div id="__asciidoctor-preview-30__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description |                                  |
| domain_id   | default                          |
| enabled     | True                             |
| id          | d4ca6cd93855497c90abb074aef473b5 |
| is_domain   | False                            |
| name        | openshift                        |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Create an user named <code>openshift_admin</code></p>
<div id="__asciidoctor-preview-31__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack user create --password 'r3dh4t1!' openshift_admin</pre>
</div>
</div>
<div id="__asciidoctor-preview-32__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | fe344863375f49d19bc8cb6023042cbd |
| name                | openshift_admin                  |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Assign admin role to the user in the project</p>
<div id="__asciidoctor-preview-33__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack role add --project openshift --user openshift_admin admin</pre>
</div>
</div>
<div id="__asciidoctor-preview-34__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command doesn&#8217;t show any output when is executed correctly.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Assign swiftoperator role to the user in the project</p>
<div id="__asciidoctor-preview-35__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ openstack role add --user openshift_admin --project openshift swiftoperator</pre>
</div>
</div>
</li>
<li>
<p>Create file <code>openshiftrc</code> to test authentication</p>
<div id="__asciidoctor-preview-36__" class="listingblock">
<div class="title">Content</div>
<div class="content">
<pre class="nowrap"># Clear any old environment that may conflict.
for key in $( set | awk '{FS="="}  /^OS_/ {print $1}' ); do unset $key ; done
export OS_NO_CACHE=True
export COMPUTE_API_VERSION=1.1
export OS_USERNAME=openshift_admin
export no_proxy=,172.16.0.102,172.16.0.102
export OS_USER_DOMAIN_NAME=Default
export OS_VOLUME_API_VERSION=3
export OS_CLOUDNAME=openshift
export OS_AUTH_URL=http://172.16.0.102:5000//v3
export NOVA_VERSION=1.1
export OS_IMAGE_API_VERSION=2
export OS_PASSWORD=r3dh4t1!
export OS_PROJECT_DOMAIN_NAME=Default
export OS_IDENTITY_API_VERSION=3
export OS_PROJECT_NAME=openshift
export OS_AUTH_TYPE=password
export PYTHONWARNINGS="ignore:Certificate has no, ignore:A true SSLContext object is not available"

# Add OS_CLOUDNAME to PS1
if [ -z "${CLOUDPROMPT_ENABLED:-}" ]; then
    export PS1=${PS1:-""}
    export PS1=\${OS_CLOUDNAME:+"(\$OS_CLOUDNAME)"}\ $PS1
    export CLOUDPROMPT_ENABLED=1
fi</pre>
</div>
</div>
</li>
<li>
<p>Test authentication</p>
<div id="__asciidoctor-preview-37__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud ~]$ . openshiftrc
(openshift) [stack@undercloud ~]$ openstack network list</pre>
</div>
</div>
<div id="__asciidoctor-preview-38__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+--------------------------------------+--------+--------------------------------------+
| ID                                   | Name   | Subnets                              |
+--------------------------------------+--------+--------------------------------------+
| 725b7803-45f2-4acd-992d-fa8a1fee28ec | public | e39a115e-c4c4-45cd-8653-4446cb5e8069 |
+--------------------------------------+--------+--------------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Set temporary url key for <code>openshift_admin</code> account</p>
<div id="__asciidoctor-preview-39__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack object store account set --property Temp-URL-Key=RHTETempKey</pre>
</div>
</div>
</li>
<li>
<p>Ensure the temporary key is set</p>
<div id="__asciidoctor-preview-40__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack object store account show</pre>
</div>
</div>
<div id="__asciidoctor-preview-41__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+------------+---------------------------------------+
| Field      | Value                                 |
+------------+---------------------------------------+
| Account    | AUTH_d4ca6cd93855497c90abb074aef473b5 |
| Bytes      | 0                                     |
| Containers | 0                                     |
| Objects    | 0                                     |
| properties | Temp-Url-Key='RHTETempKey'            |
+------------+---------------------------------------+</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openshift_4_2_installer_preparation">OpenShift 4.2 installer preparation</h2>
<div class="sectionbody">
<div id="__asciidoctor-preview-42__" class="paragraph">
<p>In these sections following tasks are performed:</p>
</div>
<div id="__asciidoctor-preview-43__" class="ulist">
<ul>
<li>
<p>Download Go and configure it (Tests were done with Go 1.12.6)</p>
</li>
<li>
<p>Download latest version of <code>openshift-installer</code> and compile it</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_download_and_configure_go">Download and configure Go</h3>
<div id="__asciidoctor-preview-44__" class="olist arabic">
<ol class="arabic">
<li>
<p>Download version 1.12.6 of Go</p>
<div id="__asciidoctor-preview-45__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ curl -O https://dl.google.com/go/go1.12.6.linux-amd64.tar.gz</pre>
</div>
</div>
<div id="__asciidoctor-preview-46__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  122M  100  122M    0     0  86.9M      0  0:00:01  0:00:01 --:--:-- 87.0M</pre>
</div>
</div>
</li>
<li>
<p>Extract Go</p>
<div id="__asciidoctor-preview-47__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ tar -xzf go1.12.6.linux-amd64.tar.gz</pre>
</div>
</div>
</li>
<li>
<p>Check Go binary</p>
<div id="__asciidoctor-preview-48__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ ~/go/bin/go version</pre>
</div>
</div>
<div id="__asciidoctor-preview-49__" class="listingblock">
<div class="title">Expected Output</div>
<div class="content">
<pre class="nowrap">go version go1.12.6 linux/amd64</pre>
</div>
</div>
</li>
<li>
<p>Download latest code of OpenShift installer for version 4.2</p>
<div id="__asciidoctor-preview-50__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ mkdir -p src/github.com/openshift/
(openshift) [stack@undercloud ~]$ cd src/github.com/openshift/
(openshift) [stack@undercloud openshift]$ git clone https://github.com/openshift/installer.git -b release-4.2</pre>
</div>
</div>
<div id="__asciidoctor-preview-51__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">Cloning into 'installer'...
remote: Enumerating objects: 81408, done.
remote: Total 81408 (delta 0), reused 0 (delta 0), pack-reused 81408
Receiving objects: 100% (81408/81408), 65.30 MiB | 22.48 MiB/s, done.
Resolving deltas: 100% (49102/49102), done.
Checking out files: 100% (15021/15021), done.</pre>
</div>
</div>
</li>
<li>
<p>Configure environment variables, increase timeout and build installer</p>
<div id="__asciidoctor-preview-52__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud openshift]$ cd installer/
(openshift) [stack@undercloud installer]$ export PATH=~/go/bin/:$PATH GOROOT=~/go/ GOPATH=/home/stack
(openshift) [stack@undercloud installer]$ sed -i 's/30 \* time.Minute/60 * time.Minute/' ./cmd/openshift-install/create.go
(openshift) [stack@undercloud installer]$ hack/build.sh</pre>
</div>
</div>
<div id="__asciidoctor-preview-53__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">&lt;&lt;OMITTED&gt;&gt;
+ go generate ./data
writing assets_vfsdata.go
+ echo ' release'
+ grep -q libvirt
+ go build -ldflags ' -X github.com/openshift/installer/pkg/version.Raw=unreleased-master-1199-g06474dd31b58a4e4299473d41a4ab85cd488ebfc -X github.com/openshift/installer/pkg/version.Commit=06474dd31b58a4e4299473d41a4ab85cd488ebfc -s -w' -tags ' release' -o bin/openshift-install ./cmd/openshift-install</pre>
</div>
</div>
</li>
<li>
<p>Test openshift-installer binary</p>
<div id="__asciidoctor-preview-54__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ bin/openshift-install version</pre>
</div>
</div>
<div id="__asciidoctor-preview-55__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">bin/openshift-install unreleased-master-1199-g06474dd31b58a4e4299473d41a4ab85cd488ebfc
built from commit 06474dd31b58a4e4299473d41a4ab85cd488ebfc
release image registry.svc.ci.openshift.org/origin/release:4.2</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openshift_4_2_installation">OpenShift 4.2 installation</h2>
<div class="sectionbody">
<div id="__asciidoctor-preview-56__" class="paragraph">
<p>In this section preparation for the installation and the installation will be performed.</p>
</div>
<div id="__asciidoctor-preview-57__" class="olist arabic">
<ol class="arabic">
<li>
<p>Get <code>openshift</code> project id</p>
<div id="__asciidoctor-preview-58__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ export PROJID=$(openstack project show openshift -c id -f value)</pre>
</div>
</div>
</li>
<li>
<p>Generate <code>clouds.yaml</code> file (file used for authentication)</p>
<div id="__asciidoctor-preview-59__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ cat &gt; clouds.yaml &lt;&lt;EOF
clouds:
  openstack:
    auth:
      auth_url: http://172.16.0.102:5000/v3
      project_name: openshift
      username: openshift_admin
      password: r3dh4t1!
      user_domain_name: Default
      project_domain_name: Default
      project_id: $PROJID
EOF</pre>
</div>
</div>
</li>
<li>
<p>Create <code>install-config.yaml</code> (used for the openshift-install)</p>
<div id="__asciidoctor-preview-60__" class="listingblock">
<div class="content">
<pre class="nowrap">apiVersion: v1
baseDomain: example.com
compute:
- hyperthreading: Enabled
  name: worker
  platform: {}
  replicas: 1
controlPlane:
  hyperthreading: Enabled
  name: master
  platform: {}
  replicas: 1
metadata:
  creationTimestamp: null
  name: rhte
networking:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
    hostSubnetLength: 9
  clusterNetworks:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
    hostSubnetLength: 9
  machineCIDR: 10.10.0.0/16
  networkType: OpenshiftSDN
  serviceCIDR: 172.30.0.0/16
  serviceNetwork:
  - 172.30.0.0/16
  type: OpenshiftSDN
platform:
  openstack:
    cloud: openstack
    computeFlavor: m1.xlarge
    externalNetwork: public
    lbFloatingIP: 172.16.0.70
    region: regionOne
    trunkSupport: "1"
pullSecret: |
  {"auths": { "quay.io": { "auth": "Y29yZW9zK3RlYzJfaWZidWdsa2VndmF0aXJyemlqZGMybnJ5ZzpWRVM0SVA0TjdSTjNROUUwMFA1Rk9NMjdSQUZNM1lIRjRYSzQ2UlJBTTFZQVdZWTdLOUFIQlM1OVBQVjhEVlla", "email": "" }, "registry.redhat.io": {"auth": "NjM0MDA1NnxyaHRlLW9jcDQyLW9zcDEzOmV5SmhiR2NpT2lKU1V6VXhNaUo5LmV5SnpkV0lpT2lJMU1HTmxOMkV6TURFM1pqYzBPV0k1WVRjMU5qVmpPRGhsWlRkaFl6QTNaaUo5LnFQS2MxY0NjSDZUazRxd1BhTlFHWnlaZF8tclBEYTRxMWlYVktxb0VZQkhfb2JZM1U3elVhY2d3UXJHN3R1a1lWLWVUVjlrMzNQUnF3MHA5dVJPRkp6TzltUjdsMVNuUXl4Zm9QUzV3SFM0ZVNtX2o2Tl9vZWV0QnVQRTJlckJkc3p0MVZFRE5kQjlHRXVUVTktMVpneU5GWEt5OGwydnhYSEpQUDNpaXF1MEktdGVIREFuWVhEUW9idkFYVElWUm94NW1RamIzQnpmWjBVYUdqMUxJdXIxQktOaHIwNFEzUjdoTDhuOEFnRXpFWFVfQU5pd25UNGdHak1VZVpsX241SkdBRDFkQ2MyNHR6NTZrLXU3MHYxVzc0dTZkNURnYlpObDhZSXlMZm1xSF9DSFR2WHZCZmozN2xkSmhnVFJGLWk2SF9CVFZRWXRnZk1qbGgtNzk2VHNRZU80RzdRSGFCbUswUG5BS0IzRnVVckRDV21Ka1c0cl9WXy10QmlWYXR4MU5pS1RzVzZ2Y25tU1VQV1lEcElXQzhRc2lybUFNTkV2bzRVQWE0VkptR1F4RjdqZXN3OEh5cFZGVm0yMkJDNWROSjhkemt1R051aDVfNWoxdXA4VUJEYnp4SGpiMl83djB5dkVRQk9NNkUwUk4zcTBkZWVCczBHYWVscUpZbEQ1UmFMSVItWXVOVy1QbDluamVaTjRteVNmcHU4SlpSUndkSFl2ZndKa0trQVpMVG1iQTdWZkFuLVZxVUI1RkpiS01oVmREUl9Mc1BoUkppVTlwQmttWHFKOVNRT05hQ1NlSlNZWU4yWlcwT3QyZzNlMjc4ZXdJSVF4X1dCdm5VTVRXYWpQWU9pOVBQa18yRjZSRWkxbExRVDYtVHpVS3dUa3dUdWI2RjdJ", "email": "6340056|rhte-ocp42-osp13"}}}
sshKey: |
  ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC+BYXIHrVWl8cPYtLzNAEZtMxS5Rh/gtaRlsXLsk1iBA6WesIWhN/So/Tlp7GdGM39EwjwrGEatI1X6R/3okjVV2Uzg6e+x1h+igc+eXcYDxwZm8/2drXrc+Oru1+FBh0AS9KeJBBtmlB6DWIjyo6ipnJ7AN8hknvLsXVbLn//qOeHK7tF5W+Ls8e04CrgujoMa2RgHaW5GMj7mazjzhwoxpXckF8hHavZ4Rxr1CtWD89orH/6PydIj8qn96S7ZqQAP/Q6IVBTXk/6h7rfmdDruzrvWVZnlSyhEWM6LaMNcsLev+iidH4bujEYc1e+hthp14GeDqEFvotaCvZN4Dml stack@undercloud.example.com</pre>
</div>
</div>
</li>
<li>
<p>Configure <code>/etc/hosts</code></p>
<div id="__asciidoctor-preview-61__" class="paragraph">
<p>For this LAB we will use <code>/etc/hosts</code> for our DNS names</p>
</div>
<div id="__asciidoctor-preview-62__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ cat &lt;&lt;EOF | sudo tee -a /etc/hosts
172.16.0.70 api.rhte.example.com
172.16.0.70 console-openshift-console.apps.rhte.example.com
172.16.0.70 openshift-authentication-openshift-authentication.apps.rhte.example.com
172.16.0.70 django-psql-example-rhte.apps.rhte.example.com
EOF</pre>
</div>
</div>
</li>
<li>
<p>Run installer (creating first working directory)</p>
<div id="__asciidoctor-preview-63__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ mkdir rhte/
(openshift) [stack@undercloud installer]$ cp install-config.yaml rhte/
(openshift) [stack@undercloud installer]$ time bin/openshift-install --log-level=debug create cluster --dir rhte</pre>
</div>
</div>
<div id="__asciidoctor-preview-64__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">DEBUG OpenShift Installer unreleased-master-1199-g06474dd31b58a4e4299473d41a4ab85cd488ebfc
DEBUG Built from commit 06474dd31b58a4e4299473d41a4ab85cd488ebfc
DEBUG Fetching "Terraform Variables"...
DEBUG Loading "Terraform Variables"...
DEBUG   Loading "Cluster ID"...
DEBUG     Loading "Install Config"...
DEBUG       Loading "SSH Key"...
DEBUG       Loading "Base Domain"...
DEBUG         Loading "Platform"...
DEBUG       Loading "Cluster Name"...
DEBUG         Loading "Base Domain"...
DEBUG       Loading "Pull Secret"...
DEBUG       Loading "Platform"...
DEBUG     Using "Install Config" loaded from target directory
DEBUG   Loading "Install Config"...
DEBUG   Loading "Image"...
DEBUG     Loading "Install Config"...
DEBUG   Loading "Bootstrap Ignition Config"...
DEBUG     Loading "Install Config"...
DEBUG     Loading "Kubeconfig Admin Client"...
&lt;&lt;OMITTED&gt;&gt;</pre>
</div>
</div>
<div id="__asciidoctor-preview-65__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Installation will take around 50 minutes. Please go to the next section to review the installation process.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_review_installation_process">Review installation process</h3>
<div id="__asciidoctor-preview-66__" class="paragraph">
<p>Open a new session to <code>undercloud</code> server.</p>
</div>
<div id="__asciidoctor-preview-67__" class="olist arabic">
<ol class="arabic">
<li>
<p>Review created networks during installation</p>
<div id="__asciidoctor-preview-68__" class="listingblock">
<div class="content">
<pre class="nowrap">[stack@undercloud ~]$ . openshiftrc
(openshift) [stack@undercloud ~]$ openstack network list --project openshift</pre>
</div>
</div>
<div id="__asciidoctor-preview-69__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+--------------------------------------+----------------------+----------------------------------------------------------------------------+
| ID                                   | Name                 | Subnets                                                                    |
+--------------------------------------+----------------------+----------------------------------------------------------------------------+
| c96a5d89-f005-47b6-ae74-fd24aba05303 | rhte-sj5bt-openshift | 99665475-bd60-4359-afc3-f637aee2e210, aea8fbce-66f0-4900-927d-518631bf77a3 |
+--------------------------------------+----------------------+----------------------------------------------------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>Review created subnets during installation</p>
<div id="__asciidoctor-preview-70__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack subnet list --project openshift</pre>
</div>
</div>
<div id="__asciidoctor-preview-71__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+--------------------------------------+--------------------+--------------------------------------+----------------+
| ID                                   | Name               | Network                              | Subnet         |
+--------------------------------------+--------------------+--------------------------------------+----------------+
| 99665475-bd60-4359-afc3-f637aee2e210 | rhte-sj5bt-service | c96a5d89-f005-47b6-ae74-fd24aba05303 | 10.10.128.0/17 |
| aea8fbce-66f0-4900-927d-518631bf77a3 | rhte-sj5bt-nodes   | c96a5d89-f005-47b6-ae74-fd24aba05303 | 10.10.0.0/17   |
+--------------------------------------+--------------------+--------------------------------------+----------------+</pre>
</div>
</div>
</li>
<li>
<p>Review the servers created</p>
<div id="__asciidoctor-preview-72__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack server list</pre>
</div>
</div>
<div id="__asciidoctor-preview-73__" class="listingblock">
<div class="content">
<pre class="nowrap">+--------------------------------------+----------------------+--------+-----------------------------------------------+-------+-----------+
| ID                                   | Name                 | Status | Networks                                      | Image | Flavor    |
+--------------------------------------+----------------------+--------+-----------------------------------------------+-------+-----------+
| 1e6634d6-bd51-41b1-ba75-35f6c0e1133a | rhte-sj5bt-master-0  | ACTIVE | rhte-sj5bt-openshift=10.10.0.7                | rhcos | m1.xlarge |
| 32f04305-4065-4249-a035-046911b6dbb2 | rhte-sj5bt-bootstrap | ACTIVE | rhte-sj5bt-openshift=10.10.0.4                | rhcos | m1.xlarge |
| 1660fbed-5c81-436a-b310-09899db5df86 | rhte-sj5bt-api       | ACTIVE | rhte-sj5bt-openshift=10.10.128.3, 172.16.0.70 | rhcos | m1.xlarge |
+--------------------------------------+----------------------+--------+-----------------------------------------------+-------+-----------+</pre>
</div>
</div>
<div id="__asciidoctor-preview-74__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Notice the floating IP created, is assigned to the API VM.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>List the security groups created</p>
<div id="__asciidoctor-preview-75__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack security group list --project openshift</pre>
</div>
</div>
<div id="__asciidoctor-preview-76__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+--------------------------------------+-------------------+------------------------+----------------------------------+
| ID                                   | Name              | Description            | Project                          |
+--------------------------------------+-------------------+------------------------+----------------------------------+
| 3ceb1aa4-b7ff-4170-b9af-fa332f476129 | default           | Default security group | d4ca6cd93855497c90abb074aef473b5 |
| 486b6ac2-260f-4bd7-967b-1523eba5f530 | rhte-sj5bt-api    |                        | d4ca6cd93855497c90abb074aef473b5 |
| ae3a41c9-f025-4ff7-ac51-2caa39f60633 | rhte-sj5bt-master |                        | d4ca6cd93855497c90abb074aef473b5 |
| bf110af5-be2f-4efc-a957-c3145aab49e8 | rhte-sj5bt-worker |                        | d4ca6cd93855497c90abb074aef473b5 |
+--------------------------------------+-------------------+------------------------+----------------------------------+</pre>
</div>
</div>
<div id="__asciidoctor-preview-77__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can explore the rules created using the command ` openstack security group rule list SGNAME`
</td>
</tr>
</table>
</div>
</li>
<li>
<p>List the trunk ports</p>
<div id="__asciidoctor-preview-78__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack network trunk  list</pre>
</div>
</div>
<div id="__asciidoctor-preview-79__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+--------------------------------------+---------------------------+--------------------------------------+-------------+
| ID                                   | Name                      | Parent Port                          | Description |
+--------------------------------------+---------------------------+--------------------------------------+-------------+
| 172fbbc8-4bd9-49b4-bea6-2cb1c52f4f1a | rhte-sj5bt-master-trunk-0 | 92c5f017-3c20-4c13-8bfd-4ff4be31cbfb |             |
+--------------------------------------+---------------------------+--------------------------------------+-------------+</pre>
</div>
</div>
</li>
<li>
<p>Show the trunk parent port</p>
<div id="__asciidoctor-preview-80__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack port show $(openstack network trunk  list -c "Parent Port" -f value)</pre>
</div>
</div>
<div id="__asciidoctor-preview-81__" class="listingblock">
<div class="title">Sample Port</div>
<div class="content">
<pre class="nowrap">+-----------------------+--------------------------------------------------------------------------------------------------+
| Field                 | Value                                                                                            |
+-----------------------+--------------------------------------------------------------------------------------------------+
| admin_state_up        | UP                                                                                               |
| allowed_address_pairs |                                                                                                  |
| binding_host_id       | overcloud-compute-0.localdomain                                                                  |
| binding_profile       |                                                                                                  |
| binding_vif_details   | bridge_name='tbr-172fbbc8-4', datapath_type='system', ovs_hybrid_plug='True', port_filter='True' |
| binding_vif_type      | ovs                                                                                              |
| binding_vnic_type     | normal                                                                                           |
| created_at            | 2019-06-28T09:41:29Z                                                                             |
| data_plane_status     | None                                                                                             |
| description           |                                                                                                  |
| device_id             | 1e6634d6-bd51-41b1-ba75-35f6c0e1133a                                                             |
| device_owner          | compute:nova                                                                                     |
| dns_assignment        | None                                                                                             |
| dns_name              | None                                                                                             |
| extra_dhcp_opts       |                                                                                                  |
| fixed_ips             | ip_address='10.10.0.7', subnet_id='aea8fbce-66f0-4900-927d-518631bf77a3'                         |
| id                    | 92c5f017-3c20-4c13-8bfd-4ff4be31cbfb                                                             |
| ip_address            | None                                                                                             |
| mac_address           | fa:16:3e:c6:8e:c5                                                                                |
| name                  | rhte-sj5bt-master-port-0                                                                         |
| network_id            | c96a5d89-f005-47b6-ae74-fd24aba05303                                                             |
| option_name           | None                                                                                             |
| option_value          | None                                                                                             |
| port_security_enabled | True                                                                                             |
| project_id            | d4ca6cd93855497c90abb074aef473b5                                                                 |
| qos_policy_id         | None                                                                                             |
| revision_number       | 11                                                                                               |
| security_group_ids    | ae3a41c9-f025-4ff7-ac51-2caa39f60633                                                             |
| status                | ACTIVE                                                                                           |
| subnet_id             | None                                                                                             |
| tags                  | openshiftClusterID=rhte-sj5bt                                                                    |
| trunk_details         | {u'trunk_id': u'172fbbc8-4bd9-49b4-bea6-2cb1c52f4f1a', u'sub_ports': []}                         |
| updated_at            | 2019-06-28T09:43:16Z                                                                             |
+-----------------------+--------------------------------------------------------------------------------------------------+</pre>
</div>
</div>
</li>
<li>
<p>List the Swift Container created</p>
<div id="__asciidoctor-preview-82__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack container list</pre>
</div>
</div>
<div id="__asciidoctor-preview-83__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+------------+
| Name       |
+------------+
| rhte-sj5bt |
+------------+</pre>
</div>
</div>
</li>
<li>
<p>Check the objects inside</p>
<div id="__asciidoctor-preview-84__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack object list rhte-sj5bt</pre>
</div>
</div>
<div id="__asciidoctor-preview-85__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+-------------------+
| Name              |
+-------------------+
| bootstrap.ign     |
| load-balancer.ign |
+-------------------+</pre>
</div>
</div>
<div id="__asciidoctor-preview-86__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This files are going to be used by RHCOS during the ignition disks boot process.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Review the <code>bootstrap.ign</code> file</p>
<div id="__asciidoctor-preview-87__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ openstack object save rhte-sj5bt bootstrap.ign --file -| jq "." | less</pre>
</div>
</div>
</li>
<li>
<p>Create <code>.ssh/config</code> to use <code>172.16.0.70</code> as jump host</p>
<div id="__asciidoctor-preview-88__" class="listingblock">
<div class="title">Content</div>
<div class="content">
<pre class="nowrap">Host 10.10.*
   ProxyJump core@172.16.0.70</pre>
</div>
</div>
<div id="__asciidoctor-preview-89__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Set permission to 640
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Connect to the IP of the bootstrap</p>
<div id="__asciidoctor-preview-90__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ ssh core@10.10.0.4</pre>
</div>
</div>
</li>
<li>
<p>Review the bootstrap process</p>
<div id="__asciidoctor-preview-91__" class="listingblock">
<div class="content">
<pre class="nowrap">[core@bootstrap ~]$   journalctl -b -f -u bootkube.service</pre>
</div>
</div>
<div id="__asciidoctor-preview-92__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">Jun 28 09:47:06 bootstrap bootkube.sh[1380]: Starting etcd certificate signer...
Jun 28 09:47:21 bootstrap bootkube.sh[1380]: ac65eb7db95182d365de5cc416bffb90ae923757c28ae84e156494afd18c9769
Jun 28 09:47:21 bootstrap bootkube.sh[1380]: Waiting for etcd cluster...</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="__asciidoctor-preview-93__" class="paragraph">
<p>During the bootstrap the <code>openshift-install</code> output will show following messages:</p>
</div>
<div id="__asciidoctor-preview-94__" class="listingblock">
<div class="content">
<pre class="nowrap">INFO Waiting up to 30m0s for the Kubernetes API at https://api.rhte.example.com:6443...
DEBUG Still waiting for the Kubernetes API: Get https://api.rhte.example.com:6443/version?timeout=32s: dial tcp 172.16.0.70:6443: connect: connection refused
&lt;&lt;REPEATING&gt;&gt;
DEBUG Still waiting for the Kubernetes API: Get https://api.rhte.example.com:6443/version?timeout=32s: EOF
&lt;&lt;REPEATING&gt;&gt;
DEBUG Still waiting for the Kubernetes API: the server could not find the requested resource
&lt;&lt;REPEATING&gt;&gt;
DEBUG Still waiting for the Kubernetes API: Get https://api.rhte.example.com:6443/version?timeout=32s: EOF
INFO API v1.14.0+1456010 up
INFO Waiting up to 30m0s for bootstrapping to complete...</pre>
</div>
</div>
<div id="__asciidoctor-preview-95__" class="paragraph">
<p>The bootstrap VM will show the following message:</p>
</div>
<div id="__asciidoctor-preview-96__" class="listingblock">
<div class="content">
<pre class="nowrap">Jun 28 09:52:29 bootstrap bootkube.sh[1380]: https://etcd-0.rhte.example.com:2379 is healthy: successfully committed proposal: took = 3.178716ms
Jun 28 09:52:29 bootstrap bootkube.sh[1380]: etcd cluster up. Killing etcd certificate signer...
Jun 28 09:52:30 bootstrap bootkube.sh[1380]: ac65eb7db95182d365de5cc416bffb90ae923757c28ae84e156494afd18c9769
Jun 28 09:52:30 bootstrap bootkube.sh[1380]: Starting cluster-bootstrap...
Jun 28 09:52:35 bootstrap bootkube.sh[1380]: Starting temporary bootstrap control plane...
&lt;&lt;OMITTED&gt;&gt;
Jun 28 09:53:04 bootstrap bootkube.sh[1380]: Created "cluster-dns-02-config.yml" dnses.v1.config.openshift.io/cluster -n
Jun 28 09:53:04 bootstrap bootkube.sh[1380]: Created "cluster-infrastructure-02-config.yml" infrastructures.v1.config.openshift.io/cluster -n
Jun 28 09:53:04 bootstrap bootkube.sh[1380]: Created "cluster-ingress-02-config.yml" ingresses.v1.config.openshift.io/cluster -n
Jun 28 09:53:04 bootstrap bootkube.sh[1380]: Created "cluster-network-02-config.yml" networks.v1.config.openshift.io/cluster -n
Jun 28 09:53:05 bootstrap bootkube.sh[1380]: Created "cluster-proxy-01-config.yaml" proxies.v1.config.openshift.io/cluster -n
Jun 28 09:53:05 bootstrap bootkube.sh[1380]:         Pod Status:openshift-kube-apiserver/kube-apiserver        DoesNotExist
Jun 28 09:53:05 bootstrap bootkube.sh[1380]:         Pod Status:openshift-kube-scheduler/openshift-kube-scheduler        DoesNotExist
Jun 28 09:53:05 bootstrap bootkube.sh[1380]:         Pod Status:openshift-kube-controller-manager/kube-controller-manager        DoesNotExist
Jun 28 09:53:05 bootstrap bootkube.sh[1380]:         Pod Status:openshift-cluster-version/cluster-version-operator        Pending
Jun 28 09:53:05 bootstrap bootkube.sh[1380]: Created "cvo-overrides.yaml" clusterversions.v1.config.openshift.io/version -n openshift-cluster-version</pre>
</div>
</div>
<div id="__asciidoctor-preview-97__" class="paragraph">
<p>At this moment we have to wait till the bootstrap finishes.</p>
</div>
<div id="__asciidoctor-preview-98__" class="olist arabic">
<ol class="arabic">
<li>
<p>During this wait, open a new terminal and connect to master node</p>
<div id="__asciidoctor-preview-99__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud ~]$ ssh core@10.10.0.7</pre>
</div>
</div>
</li>
<li>
<p>List the CRI-O pods inside the master</p>
<div id="__asciidoctor-preview-100__" class="listingblock">
<div class="content">
<pre class="nowrap">[core@master-0 ~]$ sudo -i
[root@master-0 ~]# crictl pods ps</pre>
</div>
</div>
<div id="__asciidoctor-preview-101__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">POD ID              CREATED             STATE               NAME                                NAMESPACE                    ATTEMPT
26159d2607b4e       2 minutes ago       Ready               sdn-wtlbt                           openshift-sdn                0
03a5684fd0cdc       2 minutes ago       Ready               ovs-csdhm                           openshift-sdn                0
3ef49440bd6d2       2 minutes ago       Ready               sdn-controller-h9dhm                openshift-sdn                0
192e31372da04       3 minutes ago       Ready               multus-wrrbn                        openshift-multus             0
004739b663132       3 minutes ago       Ready               network-operator-6c7d479687-jljvk   openshift-network-operator   0
55bc77972897a       5 minutes ago       Ready               etcd-member-master-0                openshift-etcd               0</pre>
</div>
</div>
</li>
<li>
<p>Review the <code>tun0</code> device</p>
<div id="__asciidoctor-preview-102__" class="listingblock">
<div class="content">
<pre class="nowrap">    inet 10.128.0.1/23 brd 10.128.1.255 scope global tun0</pre>
</div>
</div>
<div id="__asciidoctor-preview-103__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">6: tun0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1400 qdisc noqueue state UNKNOWN group default qlen 1000
    link/ether ee:02:36:2c:56:9d brd ff:ff:ff:ff:ff:ff
    inet 10.128.0.1/23 brd 10.128.1.255 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::ec02:36ff:fe2c:569d/64 scope link
       valid_lft forever preferred_lft forever</pre>
</div>
</div>
<div id="__asciidoctor-preview-104__" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
IP Corresponds to the OCP Cluster network
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Review CNI configuration</p>
<div id="__asciidoctor-preview-105__" class="listingblock">
<div class="content">
<pre class="nowrap">[root@master-0 etc]# cat /etc/kubernetes/cni/net.d/80-openshift-network.conf</pre>
</div>
</div>
<div id="__asciidoctor-preview-106__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">{
  "cniVersion": "0.3.1",
  "name": "openshift-sdn",
  "type": "openshift-sdn"
}</pre>
</div>
</div>
</li>
<li>
<p>Review Multus configuration</p>
<div id="__asciidoctor-preview-107__" class="listingblock">
<div class="content">
<pre class="nowrap">[root@master-0 etc]# cat /etc/kubernetes/cni/net.d/00-multus.conf</pre>
</div>
</div>
<div id="__asciidoctor-preview-108__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">{ "name": "multus-cni-network", "type": "multus", "namespaceIsolation": true, "logLevel": "verbose", "kubeconfig": "/etc/kubernetes/cni/net.d/multus.d/multus.kubeconfig", "delegates": [ { "cniVersion": "0.3.1", "name": "openshift-sdn", "type": "openshift-sdn" } ] }</pre>
</div>
</div>
<div id="__asciidoctor-preview-109__" class="paragraph">
<p>At this moment you can run <code>journalctl -f</code> to see the installation/configuration progress on the master node.</p>
</div>
</li>
</ol>
</div>
<div id="__asciidoctor-preview-110__" class="paragraph">
<p>On our <code>bootstrap</code> VM you can observe the progress of the required pods creation</p>
</div>
<div id="__asciidoctor-preview-111__" class="listingblock">
<div class="content">
<pre class="nowrap">Jun 28 10:01:50 bootstrap bootkube.sh[1380]:         Pod Status:openshift-kube-apiserver/kube-apiserver        DoesNotExist
Jun 28 10:01:50 bootstrap bootkube.sh[1380]:         Pod Status:openshift-kube-scheduler/openshift-kube-scheduler        DoesNotExist
Jun 28 10:01:50 bootstrap bootkube.sh[1380]:         Pod Status:openshift-kube-controller-manager/kube-controller-manager        Pending
Jun 28 10:01:50 bootstrap bootkube.sh[1380]:         Pod Status:openshift-cluster-version/cluster-version-operator        Ready
Jun 28 10:01:55 bootstrap bootkube.sh[1380]:         Pod Status:openshift-cluster-version/cluster-version-operator        Ready</pre>
</div>
</div>
<div id="__asciidoctor-preview-112__" class="paragraph">
<p>After some minutes the process will finish.</p>
</div>
<div id="__asciidoctor-preview-113__" class="listingblock">
<div class="content">
<pre class="nowrap">Jun 28 10:04:32 bootstrap bootkube.sh[1380]: Skipped "secret-kube-apiserver-to-kubelet-signer.yaml" secrets.v1./kube-apiserver-to-kubelet-signer -n openshift-kube-apiserver-operator as it already exists
Jun 28 10:04:32 bootstrap bootkube.sh[1380]: Skipped "secret-loadbalancer-serving-signer.yaml" secrets.v1./loadbalancer-serving-signer -n openshift-kube-apiserver-operator as it already exists
Jun 28 10:04:32 bootstrap bootkube.sh[1380]: Skipped "secret-localhost-serving-signer.yaml" secrets.v1./localhost-serving-signer -n openshift-kube-apiserver-operator as it already exists
Jun 28 10:04:33 bootstrap bootkube.sh[1380]: Skipped "secret-service-network-serving-signer.yaml" secrets.v1./service-network-serving-signer -n openshift-kube-apiserver-operator as it already exists
Jun 28 10:04:33 bootstrap bootkube.sh[1380]: bootkube.service complete</pre>
</div>
</div>
<div id="__asciidoctor-preview-114__" class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When the bootstrap process this VM will be deleted and your connection will be frozen. Open a new connection when this happens.
</td>
</tr>
</table>
</div>
<div id="__asciidoctor-preview-115__" class="paragraph">
<p>Output of the <code>openshift-install</code> command will show the following output:</p>
</div>
<div id="__asciidoctor-preview-116__" class="listingblock">
<div class="content">
<pre class="nowrap">DEBUG Bootstrap status: complete
INFO Destroying the bootstrap resources...
&lt;&lt;OMITTED&gt;&gt;
DEBUG
DEBUG Destroy complete! Resources: 3 destroyed.
INFO Waiting up to 30m0s for the cluster at https://api.rhte.example.com:6443 to initialize...
DEBUG Still waiting for the cluster to initialize: Working towards 4.2.0-0.okd-2019-06-28-044257: 85% complete</pre>
</div>
</div>
<div id="__asciidoctor-preview-117__" class="paragraph">
<p>+</p>
</div>
<div id="__asciidoctor-preview-118__" class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Ignore errors similar to "Could not update servicemonitor "openshift-service-catalog-controller-manager-operator/openshift-service-catalog-controller-manager-operator" (373 of 397): the server does not recognize this resource, check extension API servers "
</td>
</tr>
</table>
</div>
<div id="__asciidoctor-preview-119__" class="paragraph">
<p>At this moment we can install the <code>oc</code> client and see the installation progress.</p>
</div>
<div id="__asciidoctor-preview-120__" class="olist arabic">
<ol class="arabic">
<li>
<p>Download <code>oc</code> client</p>
<div id="__asciidoctor-preview-121__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ curl -O https://mirror.openshift.com/pub/openshift-v4/clients/oc/4.2/linux/oc.tar.gz</pre>
</div>
</div>
<div id="__asciidoctor-preview-122__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 21.6M  100 21.6M    0     0   9.8M      0  0:00:02  0:00:02 --:--:--  9.8M</pre>
</div>
</div>
</li>
<li>
<p>Extract it and copy to <code>/usr/local/bin</code></p>
<div id="__asciidoctor-preview-123__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ tar xfz oc.tar.gz
(openshift) [stack@undercloud installer]$ sudo cp oc /usr/local/bin/</pre>
</div>
</div>
</li>
<li>
<p>Configure <code>KUBECONFIG</code> environment variable and check status</p>
<div id="__asciidoctor-preview-124__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ export KUBECONFIG=rhte/auth/kubeconfig
(openshift) [stack@undercloud installer]$ oc get clusterversion</pre>
</div>
</div>
<div id="__asciidoctor-preview-125__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">NAME      VERSION   AVAILABLE   PROGRESSING   SINCE   STATUS
version             False       True          17m     Working towards 4.2.0-0.okd-2019-06-28-044257: 91% complete</pre>
</div>
</div>
</li>
<li>
<p>List the cluster operators and the status</p>
<div id="__asciidoctor-preview-126__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ oc get clusteroperator</pre>
</div>
</div>
<div id="__asciidoctor-preview-127__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">NAME                                       VERSION                         AVAILABLE   PROGRESSING   DEGRADED   SINCE
authentication                                                             Unknown     Unknown       True       5m58s
cloud-credential                           4.2.0-0.okd-2019-06-28-044257   True        False         False      12m
cluster-autoscaler                         4.2.0-0.okd-2019-06-28-044257   True        False         False      8m22s
console                                    4.2.0-0.okd-2019-06-28-044257   True        True          False      4m21s
dns                                        4.2.0-0.okd-2019-06-28-044257   True        False         False      9m39s
image-registry                                                             False       True          False      105s
ingress                                    unknown                         False       True          False      103s
kube-apiserver                             4.2.0-0.okd-2019-06-28-044257   True        True          False      8m37s
kube-controller-manager                    4.2.0-0.okd-2019-06-28-044257   True        True          False      7m28s
kube-scheduler                             4.2.0-0.okd-2019-06-28-044257   True        True          False      6m38s
machine-api                                4.2.0-0.okd-2019-06-28-044257   True        False         False      12m
machine-config                             4.2.0-0.okd-2019-06-28-044257   True        False         False      9m11s
marketplace                                4.2.0-0.okd-2019-06-28-044257   True        False         False      67s
monitoring                                                                 False       True          True       1s
network                                    4.2.0-0.okd-2019-06-28-044257   True        False         False      13m
node-tuning                                4.2.0-0.okd-2019-06-28-044257   True        False         False      4m57s
openshift-apiserver                        4.2.0-0.okd-2019-06-28-044257   False       False         False      103s
openshift-controller-manager               4.2.0-0.okd-2019-06-28-044257   True        False         False      9m1s
openshift-samples                                                          False       False         False      104s
operator-lifecycle-manager                 4.2.0-0.okd-2019-06-28-044257   True        True          False      8m26s
operator-lifecycle-manager-catalog         4.2.0-0.okd-2019-06-28-044257   True        True          False      8m26s
operator-lifecycle-manager-packageserver                                   False       True          False      8m26s
service-ca                                 4.2.0-0.okd-2019-06-28-044257   True        False         False      12m
service-catalog-apiserver                  4.2.0-0.okd-2019-06-28-044257   True        False         False      5m57s
service-catalog-controller-manager         4.2.0-0.okd-2019-06-28-044257   True        False         False      5m57s
storage                                    4.2.0-0.okd-2019-06-28-044257   True        False         False      107s
support                                    4.2.0-0.okd-2019-06-28-044257   True        False         False      12m</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="__asciidoctor-preview-128__" class="paragraph">
<p>After some minutes the installation will finish.</p>
</div>
<div id="__asciidoctor-preview-129__" class="listingblock">
<div class="content">
<pre class="nowrap">DEBUG Cluster is initialized
INFO Waiting up to 10m0s for the openshift-console route to be created...
DEBUG Route found in openshift-console namespace: console
DEBUG Route found in openshift-console namespace: downloads
DEBUG OpenShift console route is created
INFO Install complete!
INFO To access the cluster as the system:admin user when using 'oc', run 'export KUBECONFIG=/home/stack/src/github.com/openshift/installer/rhte/auth/kubeconfig'
INFO Access the OpenShift web-console here: https://console-openshift-console.apps.rhte.example.com
INFO Login to the console with user: kubeadmin, password: vUvx4-VghAH-gSpzS-mp4Ip

real	52m44.740s
user	0m39.039s
sys	0m2.374s</pre>
</div>
</div>
<div id="__asciidoctor-preview-130__" class="paragraph">
<p>A new VM was created during the OpenShift installation</p>
</div>
<div id="__asciidoctor-preview-131__" class="olist arabic">
<ol class="arabic">
<li>
<p>Review new VM</p>
<div id="__asciidoctor-preview-132__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ openstack server list --name worker</pre>
</div>
</div>
<div id="__asciidoctor-preview-133__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">+--------------------------------------+-------------------------+--------+---------------------------------+-------+-----------+
| ID                                   | Name                    | Status | Networks                        | Image | Flavor    |
+--------------------------------------+-------------------------+--------+---------------------------------+-------+-----------+
| 6dc784d7-bb87-4485-a0a3-c604aa585ca9 | rhte-sj5bt-worker-2djgx | ACTIVE | rhte-sj5bt-openshift=10.10.0.17 | rhcos | m1.xlarge |
+--------------------------------------+-------------------------+--------+---------------------------------+-------+-----------+</pre>
</div>
</div>
</li>
<li>
<p>Review the OC nodes</p>
<div id="__asciidoctor-preview-134__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ export KUBECONFIG=/home/stack/src/github.com/openshift/installer/rhte/auth/kubeconfig
(openshift) [stack@undercloud installer]$ oc get nodes
NAME              STATUS   ROLES    AGE   VERSION
host-10-10-0-17   Ready    worker   21m   v1.14.0+04ae0f405
master-0          Ready    master   55m   v1.14.0+04ae0f405</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_basic_functionality">Test basic functionality</h2>
<div class="sectionbody">
<div id="__asciidoctor-preview-135__" class="paragraph">
<p>Now is time to test the basic functionality: create an app.</p>
</div>
<div id="__asciidoctor-preview-136__" class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new project named <code>rhte</code></p>
<div id="__asciidoctor-preview-137__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ oc new-project rhte</pre>
</div>
</div>
<div id="__asciidoctor-preview-138__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">Now using project "rhte" on server "https://api.rhte.example.com:6443".

You can add applications to this project with the 'new-app' command. For example, try:

    oc new-app django-psql-example

to build a new example application in Python. Or use kubectl to deploy a simple Kubernetes application:

    kubectl create deployment hello-node --image=gcr.io/hello-minikube-zero-install/hello-node</pre>
</div>
</div>
</li>
<li>
<p>Create a new sample apps</p>
<div id="__asciidoctor-preview-139__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ oc new-app django-psql-example</pre>
</div>
</div>
<div id="__asciidoctor-preview-140__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">&lt;&lt;OMITTED&gt;&gt;
--&gt; Creating resources ...
    secret "django-psql-example" created
    service "django-psql-example" created
    route.route.openshift.io "django-psql-example" created
    imagestream.image.openshift.io "django-psql-example" created
    buildconfig.build.openshift.io "django-psql-example" created
    deploymentconfig.apps.openshift.io "django-psql-example" created
    service "postgresql" created
    deploymentconfig.apps.openshift.io "postgresql" created
--&gt; Success
    Access your application via route 'django-psql-example-rhte.apps.rhte.example.com'
    Build scheduled, use 'oc logs -f bc/django-psql-example' to track its progress.
    Run 'oc status' to view your app.</pre>
</div>
</div>
</li>
<li>
<p>Check the status</p>
<div id="__asciidoctor-preview-141__" class="listingblock">
<div class="content">
<pre class="nowrap">(openshift) [stack@undercloud installer]$ watch oc status</pre>
</div>
</div>
<div id="__asciidoctor-preview-142__" class="listingblock">
<div class="title">Sample Output</div>
<div class="content">
<pre class="nowrap">In project rhte on server https://api.rhte.example.com:6443

http://django-psql-example-rhte.apps.rhte.example.com (svc/django-psql-example)
  dc/django-psql-example deploys istag/django-psql-example:latest &lt;-
    bc/django-psql-example source builds https://github.com/sclorg/django-ex.git on openshift/python:3.6
      build #1 running for 42 seconds - 0905223: Merge pull request #137 from danmcp/patch-1 (Ben Parees &lt;bparees@users.noreply.github.com&gt;)
    deployment #1 waiting on image or update

svc/postgresql - 172.30.174.52:5432
  dc/postgresql deploys openshift/postgresql:10
    deployment #1 waiting on image or update

View details with 'oc describe &lt;resource&gt;/&lt;name&gt;' or list everything with 'oc get all'.</pre>
</div>
</div>
<div id="__asciidoctor-preview-143__" class="paragraph">
<p>Wait till the process finished.</p>
</div>
</li>
<li>
<p>Access to the application</p>
<div id="__asciidoctor-preview-144__" class="listingblock">
<div class="content">
<pre class="nowrap">(overcloud) [stack@undercloud installer]$ curl -s django-psql-example-rhte.apps.rhte.example.com | grep title</pre>
</div>
</div>
<div id="__asciidoctor-preview-145__" class="listingblock">
<div class="content">
<pre class="nowrap">  &lt;title&gt;Welcome to OpenShift&lt;/title&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
        </div>
      </div>
    </body>
  </html>
